# CheckMissingChapters

Sigil 插件 - 检查 EPUB 电子书中缺失的章节/分卷号

## 基本信息

| 属性 | 值 |
|------|-----|
| 名称 | CheckMissingChapters |
| 版本 | 0.2.0 |
| 作者 | Jules |
| 类型 | edit（编辑类插件） |
| 平台 | macOS / Windows / Linux |

## 核心功能

检查 EPUB 电子书 `nav.xhtml` 导航文档中是否存在缺失的章节/分卷号。

## 主要特性

1. **章节规则配置** - 支持自定义前缀（如"第"）、数字模式（阿拉伯/中文/混合）、后缀（如"章|节|回"）
2. **分卷规则配置** - 可选启用，支持自定义分卷正则匹配
3. **编号策略** - 三种模式：每卷从1开始 / 从0开始 / 接续上一卷
4. **中文数字支持** - 内置 `cn2an_simple` 函数转换中文数字（零-万）
5. **配置持久化** - 使用 `config.json` 保存用户设置

## 技术架构

- 使用 PyQt5/PySide6 构建 GUI 设置对话框
- `pyqt_import.py` 提供 Qt 版本兼容层（根据 `SIGIL_QT_RUNTIME_VERSION` 环境变量自动选择）
- 通过 XML 解析或正则回退提取导航文本

## 工作流程

```
弹出设置对话框 → 构建正则 → 解析 nav.xhtml → 检测章节序列缺口 → 输出报告
```

输出示例：
- ✅ 完整连续
- ⚠️ 存在缺失

## 安装

1. 下载插件文件夹
2. 在 Sigil 中：`插件` → `管理插件` → `添加插件`
3. 选择插件文件夹

## 使用

1. 在 Sigil 中打开 EPUB 文件
2. 运行插件：`插件` → `编辑` → `CheckMissingChapters`
3. 配置章节/分卷规则
4. 点击确定，查看检测结果
